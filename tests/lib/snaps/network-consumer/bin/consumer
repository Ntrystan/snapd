#! /usr/bin/env python3

import sys
from socket import timeout
import urllib.request

url = sys.argv[1] if len(sys.argv) > 1 else 'http://www.ubuntu.com'
try:
  response = urllib.request.urlopen(url, timeout=3)
  decoded_response = response.read().decode('utf-8')
  print(decoded_response, end="")
except urllib.error.URLError as e:
  print("Error, reason: ", e.reason)
  sys.exit(1)
except timeout:
  print("request timeout")
  sys.exit(1)
